姓名：张家骏
班级：23级“计算机科学与技术+金融学双学位班”
# 电子商务网站项目 - Java版本

基于 **Java 17.0.8 + Spring Boot 3.1.5 + MySQL 5.7** 开发的完整电子商务系统，前后端不分离，使用 Thymeleaf 模板引擎。

## 技术栈

- **Java**: 17.0.8
- **Spring Boot**: 3.1.5
- **Spring Data JPA**: 数据访问层
- **Thymeleaf**: 模板引擎
- **MySQL**: 5.7
- **Maven**: 项目构建工具
- **Lombok**: 简化代码
- **BCrypt**: 密码加密

## 功能特性

### 顾客端功能
- ✅ 用户注册/登录（密码使用 BCrypt 加密）
- ✅ 商品列表展示（支持搜索、分页）
- ✅ 商品详情查看
- ✅ 购物车管理（添加、修改、删除）
- ✅ 订单生成与支付（模拟支付）
- ✅ 订单管理（查看订单列表和详情）
- ✅ 用户行为日志记录

### 管理员后台
- ✅ 管理员登录
- ✅ 商品管理（增删改查、上下架）
- ✅ 订单管理（查看、修改订单状态）
- ✅ 客户管理（查看用户、启用/禁用账号）
- ✅ 用户行为日志查看
- ✅ 销售统计报表

## 环境要求

- JDK 17.0.8 或更高版本
- Maven 3.6+
- MySQL 5.7 或更高版本
- IDE（推荐 IntelliJ IDEA 或 Eclipse）

## 快速开始

### 1. 创建数据库

```bash
mysql -u root -p < src/main/resources/database.sql
```

或者使用 MySQL 客户端导入 `src/main/resources/database.sql` 文件。

### 2. 配置数据库连接

编辑 `src/main/resources/application.yml` 文件：

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/shop_db?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password: root  # 修改为你的数据库密码
```

### 3. 编译运行

#### 方式一：使用 Maven 命令

```bash
# 编译项目
mvn clean compile

# 运行项目
mvn spring-boot:run
```

#### 方式二：使用 IDE

1. 使用 IntelliJ IDEA 或 Eclipse 导入项目
2. 等待 Maven 自动下载依赖
3. 运行 `ShopApplication` 主类

### 4. 访问网站

- **前台访问**: http://localhost:8080/shop_v4/
- **后台访问**: http://localhost:8080/shop_v4/admin/login

### 5. 默认账号

**管理员账号：**
- 用户名：`admin`
- 密码：`admin123`

## 项目结构

```
shop_v4/
├── src/
│   ├── main/
│   │   ├── java/com/shop/
│   │   │   ├── entity/          # 实体类
│   │   │   ├── repository/     # 数据访问层
│   │   │   ├── service/        # 业务逻辑层
│   │   │   ├── controller/     # 控制器层
│   │   │   ├── config/         # 配置类
│   │   │   ├── util/            # 工具类
│   │   │   └── ShopApplication.java
│   │   └── resources/
│   │       ├── templates/       # Thymeleaf 模板
│   │       ├── static/          # 静态资源
│   │       ├── application.yml  # 配置文件
│   │       └── database.sql     # 数据库脚本
│   └── test/                    # 测试代码
├── pom.xml                      # Maven 配置
└── README_JAVA.md              # 说明文档
```

## 数据库表结构

- `users` - 用户表
- `admins` - 管理员表
- `products` - 商品表
- `orders` - 订单表
- `order_items` - 订单商品明细表
- `carts` - 购物车表
- `user_logs` - 用户行为日志表

## 开发说明

### 密码加密

使用 BCrypt 算法加密密码，工具类：`PasswordUtil`

### Session 管理

使用 HttpSession 管理用户登录状态：
- 用户登录：`session.setAttribute("userId", userId)`
- 管理员登录：`session.setAttribute("adminId", adminId)`

### 订单号生成

使用 `OrderUtil.generateOrderNo()` 生成唯一订单号，格式：`ORD + 时间戳 + 随机数`

## 注意事项

1. **数据库配置**：确保 MySQL 服务已启动，数据库已创建
2. **端口配置**：默认端口 8080，可在 `application.yml` 中修改
3. **JPA 自动建表**：`ddl-auto: update` 会自动更新表结构，生产环境建议改为 `validate`
4. **静态资源**：图片等静态资源放在项目根目录的 `images/` 和 `uploads/` 文件夹

## 常见问题

### 1. 编译错误

确保使用 JDK 17，检查 `pom.xml` 中的 Java 版本配置。

### 2. 数据库连接失败

检查 `application.yml` 中的数据库配置，确保 MySQL 服务已启动。

### 3. 端口被占用

修改 `application.yml` 中的 `server.port` 配置。

### 4. Thymeleaf 模板找不到

确保模板文件在 `src/main/resources/templates/` 目录下。


